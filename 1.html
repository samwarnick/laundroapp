<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <title>Laundroapp</title>
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Poiret+One|Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  </head>
  <body>
    <div class="" id="content">
      <img id="iphone" src="img/iPhone-6-wireframe.jpg" alt="" />
      <div class="" id="container">
        <div class="" id="nav">
          <h1><i class="fa fa-angle-left" id="back-icon" onclick="goBack()"></i>Laundroapp<i class="fa fa-cog" id="settings-icon"></i><h1>
        </div>
        <div id="reviews-container">
          <div id="rating">
            <h2 id="laundromat-name">Name</h2>
            <span id="stars"></span>
            <button onclick="location.href='write.html';">Write Review</button>
          </div>
          <ul id="reviews">

          </ul>
        </div>
      </div>
    </div>
    <script>
      function goBack() {
          window.history.back();
      }
    </script>
    <script type="text/javascript">
      var laundromat = {id: 1, name: 'Laundry on Ninth', pos: {lat: 40.239545, lng: -111.642502}, rating: 3.7};
      var reviews = [
        {author: "Sam", date: "11/30/15", review: "This place is great", rating: 5},
        {author: "Guy", date: "11/27/15", review: "My clothes ended up smelling like pizza", rating: 2},
        {author: "Sam", date: "11/2/15", review: "Seats were a little uncomfortable", rating: 4}
      ]

      function createReview(review) {
        var content = "<li>";

        content += "<h4>" + review.author + " on " + review.date;

        for (var i =0; i < Math.floor(review.rating); i++) {
          content += '<i class="fa fa-star"></i>';
        }
        var left = 5 - Math.floor(review.rating);
        if (review.rating > Math.floor(review.rating)) {
          content += '<i class="fa fa-star-half-o"></i>'
          left -= 1;
        }
        for (var i =0; i < left; i++) {
          content += '<i class="fa fa-star-o"></i>';
        }

        content += "</h4>";

        content += "<h3>" + review.review + "</h3>";
        content += "</li>";
        return content;
      }

      var stars = "";
      for (var i =0; i < Math.floor(laundromat.rating); i++) {
        stars += '<i class="fa fa-star"></i>';
      }
      var left = 5 - Math.floor(laundromat.rating);
      if (laundromat.rating > Math.floor(laundromat.rating)) {
        stars += '<i class="fa fa-star-half-o"></i>'
        left -= 1;
      }
      for (var i =0; i < left; i++) {
        stars += '<i class="fa fa-star-o"></i>';
      }
      $("#stars").html(stars);
      $("#laundromat-name").html(laundromat.name);

      $("#reviews").empty();
      for (var i = 0; i < reviews.length; i++) {
        var content = createReview(reviews[i]);
        $("#reviews").append(content);
      }
    </script>
  </body>
</html>
